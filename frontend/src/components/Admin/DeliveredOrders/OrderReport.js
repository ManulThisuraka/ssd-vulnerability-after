import React, {useEffect, useState} from 'react';
import axios from 'axios';
import 'jspdf-autotable';
import {Bar, BarChart, CartesianGrid, Legend, ResponsiveContainer, Tooltip, XAxis, YAxis} from 'recharts';
import {getUrl} from '../../../api/baseUrlService';

export default function OrderReport(props) {

  const [completeList, setCompleteList] = useState([]);
  const [details, setDetails] = useState([]);
  let dataMonth = [];
  const URL = getUrl();

  useEffect(() => {

    axios.get(`${URL}/complete/by-month/`).then((response) => {
      setDetails(response.data);
    }).catch((error) => {
      alert(error);
    });

  }, []);

  details.sort(function(x, y) {
    return x.index - y.index;
  });

  return (
      <div style={{height: '220px', width: '700px'}}>
        <ResponsiveContainer width="100%" height="100%">
          <BarChart
              width={1200}
              height={200}
              data={details}
              margin={{
                top: 12,
                right: 30,
                left: 20,
                bottom: 0,
              }}
          >
            <CartesianGrid strokeDasharray="3 3"/>
            <XAxis dataKey="label"/>
            <YAxis/>
            <Tooltip/>
            <Legend/>
            <br></br>
            <Bar dataKey="value" fill="#8884d8"/>

          </BarChart>
        </ResponsiveContainer>
      </div>
  );
}